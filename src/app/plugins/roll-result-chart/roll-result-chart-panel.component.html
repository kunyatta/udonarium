<div class="panel-container">
  <div class="sidebar">
    <div class="sidebar-header">
      <button class="full-width" (click)="createNew()">+ 新規チャート</button>
      <button class="full-width secondary" style="margin-top: 4px;" (click)="exportAll()">辞書を一括保存</button>
    </div>
    <div class="chart-list">
      <div *ngFor="let chart of charts"
           class="chart-item"
           [class.selected]="chart.identifier === selectedIdentifier"
           (click)="selectChart(chart.identifier)">
        {{ chart.title }}
      </div>
    </div>
  </div>

  <div class="main-content">
    <div class="editor-header" *ngIf="editingChart">
      <button (click)="export()">個別保存</button>
      <button class="danger" (click)="delete()" [disabled]="!selectedIdentifier">削除</button>
    </div>
    
    <div class="edit-panel" *ngIf="editingChart">
      <div class="input-column">
        <div class="input-group">
          <label>チャート名</label>
          <input type="text" [(ngModel)]="editingChart.title" (change)="onChartChange()">
        </div>
        <div class="input-group">
          <label>コマンド</label>
          <input type="text" [(ngModel)]="editingChart.command" (change)="onChartChange()">
        </div>
        <div class="input-group">
          <label>使用ダイス</label>
          <input type="text" [(ngModel)]="editingChart.dice" (change)="onChartChange()">
        </div>
      </div>
      <div class="input-group full-height">
        <label>表の内容 (数字:結果)</label>
        <textarea [(ngModel)]="editingChart.value" (change)="onChartChange()" placeholder="1:結果A
2-5:結果B
*:結果C"></textarea>
      </div>
    </div>

    <div class="empty-state" *ngIf="!editingChart">
      <div>
        <div class="message">チャートを選択するか、新規作成してください。</div>
        <div class="description">各種ゲームの「ハプニング表」など、ダイスの出目によって結果が変わる複雑な表を自動化します</div>
      </div>
    </div>
  </div>
</div>